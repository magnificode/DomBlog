{"data":{"markdownRemark":{"html":"<p>Wow, almost three years after I posted a <a href=\"/2016-05-16-basic-class-toggle-with-vanilla-js/\">lil' blog post</a> about a basic class toggle with Vanilla JS, I suppose I could write out how to do this same thing with ES6.</p>\n<p>Since we last visited our class toggle task in 2016, quite a few things have changed. Let's take what we have where we left off and refactor it a bit to be more up to the current standard.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> el <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.toggle-me'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nel<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  el<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token string\">'active'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ahh yes. Nothing better than looking at your own old code...ü§¶‚Äç. First things first, let's update how we're caching the DOM element using <code class=\"language-text\">const</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> el <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.toggle-me'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nel<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  el<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token string\">'active'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Super small change here, but keep in mind, when using <code class=\"language-text\">const</code> you want to be sure that whatever you're referencing is not something that will be mutated further down the line. We know that the <code class=\"language-text\">.toggle-me</code> DOM node won't be mutated into something completely different, so <code class=\"language-text\">const</code> is appropriate here.</p>\n<p>Next, let's take a look at the function. Currently we're using the <code class=\"language-text\">onclick</code> event handler to detect when a user clicks on our defined element. Now this will work just fine out of the box, but let's pepper in an ES6 arrow function!</p>\n<p>As a primer, arrow functions are just a more compact way of writing a regular function like we have in the snippet above. It's worth noting however that <code class=\"language-text\">this</code> behaves quite differently within an arrow function. Tyler McGinnis has a <a href=\"https://tylermcginnis.com/arrow-functions/\">wonderful post</a> that goes into depth about the ins and outs of the arrow function. Feel free to pop over there if you want to dive a little deeper.</p>\n<p>For our sake, we can utilize an arrow function to condense our code just a bit:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> el <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.toggle-me'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nel<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> el<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token string\">'active'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Nice! We're able to trim that down to two very succinct lines of javascript. With our arrow function, we're implicitly running the toggle method on our element. No need to add curly braces around our one line function. This will work perfectly, and remain accessible if the class toggle is a <code class=\"language-text\">&lt;button&gt;</code> or <code class=\"language-text\">&lt;input type=&quot;submit&quot;&gt;</code> element. The <code class=\"language-text\">onclick</code> listener also accounts for users who utilize the keyboard to navigate. The <code class=\"language-text\">enter</code> and <code class=\"language-text\">space</code> keys will trigger a click on these elements. But what about if we need to toggle a class on a <code class=\"language-text\">&lt;div&gt;</code>, <code class=\"language-text\">&lt;span&gt;</code> or another element that is not interactive by default?</p>\n<h2>Class toggles on non-interactive elements</h2>\n<p><strong>Big ol' disclaimer here. If you have an element on your page that does a thing when you interact with it, you will <em>ALMOST ALWAYS</em> use a button. It's the standard for saying \"Hey when you click this thing, something is going to happen on the page you're currently viewing\". But, if you have a case where you absolutely cannot use a button or submit input, it's imperative that you make that element accessible for keyboard users.</strong></p>\n<p>For non interactive elements like <code class=\"language-text\">&lt;div&gt;</code> and <code class=\"language-text\">&lt;span&gt;</code>, an extra step must be taken to ensure that the interaction is accessible to keyboard users. We're going to add a new event listener to our snippet that will ensure usability for all.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> el <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.toggle-me'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nel<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> el<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token string\">'active'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nel<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keyup'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>keyCode <span class=\"token operator\">===</span> <span class=\"token number\">13</span> <span class=\"token operator\">||</span> event<span class=\"token punctuation\">.</span>keyCode <span class=\"token operator\">===</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    el<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token string\">'active'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Please also don't forget, that because these elements are not interactive by default, we need to ensure that users can focus the item properly in the DOM. Let's assume that our element is a <code class=\"language-text\">&lt;div&gt;</code>. By adding a <code class=\"language-text\">tabindex</code> attribute to that div, we are able to ensure that keyboard users are able to focus the element.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>toggle-me<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Hi!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>Note here as well, when using <code class=\"language-text\">tabindex</code> you very rarely will want to take elements out of the tab flow of the document. Using <code class=\"language-text\">tabindex=&quot;0&quot;</code> makes the element focusable, but keeps it in the normal tab flow. A value of anything other than 0 will take it out of the flow, and could potentially cause confusion for keyboard users. Only do this if it's absolutely necessary, and you have a plan to ensure that keyboard users know exactly what's happening</strong>.</p>\n<p>The <code class=\"language-text\">keyup</code> event listener will listen for when a keyboard user hits, and releases a key. Within our arrow function, we now need to pass that keyup event so that we can capture the event, and only trigger the class toggle if the enter, or space keys are hit (these are the keyboard keys that indicate a user is trying to perform an action on our element). With that event captured, we can then run our class toggle!</p>\n<p>Because we're running the toggle twice, let's consolidate again.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> el <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.toggle-me'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleToggle</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> el<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token string\">'active'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nel<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">handleToggle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nel<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keyup'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>keyCode <span class=\"token operator\">===</span> <span class=\"token number\">13</span> <span class=\"token operator\">||</span> event<span class=\"token punctuation\">.</span>keyCode <span class=\"token operator\">===</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">handleToggle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>With ES6 we can assign our arrow function to a <code class=\"language-text\">const</code>, and call that function in multiple places.</p>\n<p>Spectacular! With that, you should now be able to level up your CSS class toggle to ES6 fairly painlessly for both interactive, and non-interactive elements.</p>","fields":{"title":"Basic ES6 Vanilla JS Class Toggle","date":"06 May, 2019"}}},"pageContext":{"slug":"/2019-05-06-basic-class-toggle-with-vanilla-js-es6/"}}