{"componentChunkName":"component---src-templates-post-js","path":"/2023-03-31-server-components-in-next-13/","result":{"data":{"markdownRemark":{"html":"<p>I just got back from the labs at <a href=\"https://houseofgiants.com\">House of Giants</a> where I was able to take a look at some of the cool new features in Next 13. One of these promising new features is server components. This new capability promises to change the way we build NextJS applications for the better. In this post, we'll take a closer look at server components, explore their benefits, and discuss best practices for using them in real-world scenarios.</p>\n<h2>What are server components?</h2>\n<p>Server components allow us to isolate the specific parts of our application that depend on server-side rendered data. By breaking down our pages into smaller, more manageable components, we can load them independently for improved modularity and easier maintenance. Additionally, server components help improve performance by reducing the amount of unnecessary data that needs to be loaded.</p>\n<h2>An alternative to existing solutions</h2>\n<p>Before we dive into how to create server components, let's take a look at how they compare to other server-side rendering options in NextJS:</p>\n<ul>\n<li><strong>getStaticProps/getServerSideProps</strong>: These functions allow you to fetch data at build time or request time, respectively. However, they only work for the entire page, not individual components.</li>\n<li><strong>API routes</strong>: API routes allow you to fetch data from the server, but they require you to make an extra network request from the client.</li>\n<li><strong>Hydration</strong>: Hydration is a technique that allows the client to take over rendering from the server after the initial page load. While this approach can work well for smaller applications, it can become unwieldy as your application grows.</li>\n</ul>\n<p>Server components offer a more flexible and powerful approach to server-side rendering, allowing you to load only the components you need when you need them.</p>\n<h2>What are the benefits</h2>\n<p>Server components are a significant improvement over the old way of rendering server side data in NextJS. They provide a more modular approach to managing server side rendering, allowing for better isolation of components that rely on server side data. This not only makes it easier to manage your application, but also reduces bundle sizes by only loading the necessary server components. Additionally, server components can be loaded independently, which leads to faster load times and improved performance overall.</p>\n<h2>Show me the code üë®‚Äçüíª</h2>\n<p>Let's dive into creating a basic server component:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// components/SWPlanets.js</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getPlanets</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://swapi.dev/api/planets\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">ServerPlanets</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getPlanets</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">planet</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>planet<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>planet<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This component is unique because it uses server-side rendering to fetch the data. It is not tied to any specific page, but rather can be used as a standalone component to retrieve and display the data on the server. By doing so, we can avoid unnecessary network requests from the client and provide a more optimized bundle. Additionally, because server components are isolated, they can be composed together to create more complex features within our application, improving modularity and maintainability. Pretty slick!</p>\n<h2><strong>Real-world use cases and best practices for using server components</strong></h2>\n<p>Besides obtaining the diameter, population and orbital period of Dagobah, here are a few other real world use cases for server components.</p>\n<ul>\n<li><strong>Lazy loading</strong>: Use server components to load parts of the page only when they are needed, reducing the initial page load time.</li>\n<li><strong>A/B testing</strong>: Use server components to test different variations of a component or page and track user engagement.</li>\n<li><strong>Server-side analytics</strong>: Use server components to send data to your analytics platform directly from the server, bypassing the need to track events on the client.</li>\n</ul>\n<p>When using server components, it's important to follow best practices to ensure optimal performance and maintainability. Keep these tips in mind as you build:</p>\n<ul>\n<li><strong>Keep components small</strong>: Divide your page into small, reusable components that can be loaded independently.</li>\n<li>\n<p><strong>Cache data</strong>: Use caching strategies to avoid making unnecessary API calls and improve performance.</p>\n<ul>\n<li>To this point, we could optimize our example further by leveraging <code class=\"language-text\">getServerSideProps</code> to cache our planet data. See if you can work out how to add that to our example above!</li>\n</ul>\n</li>\n<li><strong>Test thoroughly</strong>: Test your server components thoroughly to ensure they work as expected and don't introduce new bugs.</li>\n</ul>\n<h2>Wrap it up</h2>\n<p>It‚Äôs pretty clear that the folks at Next are doing their level best to optimize the amount of JavaScript that is output in our applications in an attempt to reduce the massive weight of web applications these days. Server components and their counterpart client components are a pretty cool step in that direction. Very much looking forward to testing and implementing these features in future builds at <a href=\"https://houseofgiants.com\">House of Giants</a>!</p>\n<h3>Post resources:</h3>\n<ul>\n<li><a href=\"https://beta.nextjs.org/docs/rendering/server-and-client-components\">https://beta.nextjs.org/docs/rendering/server-and-client-components</a></li>\n<li><a href=\"https://swapi.dev/\">https://swapi.dev/</a></li>\n</ul>","fields":{"title":"Server Components in Next 13","date":"31 March, 2023","description":"Exploration of the new server component behavior in Next 13 with basic example.\n","slug":"/2023-03-31-server-components-in-next-13/"}}},"pageContext":{"slug":"/2023-03-31-server-components-in-next-13/"}}}